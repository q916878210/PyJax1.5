<section class="content-wrap center">
    <div class="column">
        <div class="content white center pad-16-lr pad-16-tb">
            {%!kwargs:account=None%}
        </div>

        <div class="content white pad-16-lr pad-16-tb par">
            <p>
                PyJax is a web hosting and compilation framework designed to make web development modular.
                Content and resources are automatically gathered and assembled.
                Get/Post requests can be handled with html and/or Python methods.
            </p>

            <p>
                PyJax runs on OSX/Windows/Linux (including Raspberry pi) with Python 2.7 installed.
            </p>

            <p>
                A complete how-to will come soon.
            </p>
        </div>

        <div class="content white">
            <div class="pad-16-lr pad-16-tb">
                <h3>Configuration</h3>
                <p class="p-sub">
                    The default settings can be modified by changing values in
                    the following json files.
                </p>
                <ul class="list">
                    <li>config /</li>
                    <ul class="link" type="auto-load" url="config" place="#config-more">
                        <li a="config">config.json</li>
                        <li a="links">links.json</li>
                        <li a="server">server.json</li>
                    </ul>
                </ul>
            </div>
            <div class="dark-blue content-bottom gpu">
                <div class="content-text white-text" id="config-more"></div>
            </div>
        </div>

        <div class="content white">
            <div class="pad-16-lr pad-16-tb">
                <h3>Framework</h3>
                <ul class="list">
                    <li>framework /</li>
                    <ul class="link" type="auto-load" url="frame" place="#frame-more">
                        <li a="head">head.html</li>
                        <li a="nav">nav.html</li>
                        <li a="frame">frame.html</li>
                        <li a="footer">footer.html</li>
                        <li a="404">404.html</li>
                        <li a="scripts">scripts /</li>
                    </ul>
                </ul>
            </div>
            <div class="dark-blue content-bottom gpu">
                <div id="frame-more"></div>
            </div>
        </div>

        <div class="content white">
            <div class="pad-16-lr pad-16-tb">
                <h3>Web</h3>
                <ul class="list">
                    <li>assets /</li>
                    <ul class="link" type="auto-load" url="assets" place="#web-more">
                        <li a="css">css /</li>
                        <li a="img">img /</li>
                        <li a="js">js /</li>
                        <li a="media">media /</li>
                    </ul>
                    <li>html /</li>
                    <li>site /</li>
                    <ul class="link" type="auto-load" url="site" place="#web-more">
                        <li a="links">Links.py</li>
                        <li a="socketlinks">SocketLinks.py</li>
                    </ul>
                    <li>triggers /</li>
                </ul>
            </div>
            <div class="dark-blue content-bottom gpu">
                <div id="web-more"></div>
            </div>
        </div>

        <div class="content white pad-16-lr pad-16-tb">
            <h3>Features</h3>
            <div class="hmm-switch">
                Hmm... a switch
                <div id="toggle"></div>
            </div>
            <ul class="list fill">
                <li>Smartly produces content</li>
                <ul class="small">
                    <li>POST returns the requested content</li>
                    <li>GET returns entire built page</li>
                    <li>GET with the argument 'ajax=true' returns the requested content</li>
                </ul>
                <li>Forces modular design</li>
                <li>Auto .css, .js & media linking</li>
            </ul>
            <section class="left">
                <code>
                    <a href="home">Normal link</a>
                    {%Code.write%}
                </code>
            </section>
            <br>
            <section class="left">
                <code>
                    <a load href="#home">Async Link</a>
                    {%Code.write%}
                </code>
            </section>
            <br>
            <section class="left">
                <code>
                    <a load="#insert-here" href="#singleclock">Target Async Link</a>
                    {%Code.write%}
                </code>
            </section>

            <br>
            <div id="insert-here"></div>
        </div>
    </div>
</section>

<script>
    Jax.ready(function(){
        var contents = Jax.fn.select("div.content");
        Toggle.make(document.getElementById('toggle'), function(status){
            contents.toggleClass('white');
            contents.toggleClass('black');
        });
        Jax.fn.select('ul[type="auto-load"]').forEach(function(element){
            Jax.fn.select(element.children).click(function(){
                Jax.fn.select(element.parentNode.querySelector('[class="active"]')).removeClass('active');
                Jax.fn.cls.add(this, 'active');
                var place = Jax.fn.select(element.getAttribute('place'));
                Jax.get(element.getAttribute('url') + '?a=' + this.getAttribute('a'), function(data){
                    place.html(data.text);
                    place.element().parentNode.style.height = place.element().getBoundingClientRect().height + 16 + "px";
                });
            });
        });
    });
</script>
