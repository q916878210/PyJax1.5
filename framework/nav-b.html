<div id="menu-wrap" class="no-select">
    <nav id="menu">
        <!--jax-inject:links-->
        <ol content="sub-menu" label="Designs" extra-class="menu-toggle" class="shift">
            <li page="calendar">Calendar</li>
            <li page="clock">Clock</li>
            <li page="pscrollfull">Page Scroll</li>
            <li page="video">Video Player</li>
        </ol>
    </nav>
</div>

<script>
    var subMenuHtml = function(label){
        var html = '<div><div class="icon"><div></div><div></div><div></div></div>';
        html += '<label>' + label + '</label>';
        return html + '</div>';
    };

    Jax.select('nav#menu > ol[content="sub-menu"]').forEach(function(element){
        var li = document.createElement('li');
        li.className = element.getAttribute('extra-class') + ' no-load';
        li.innerHTML = subMenuHtml(element.getAttribute('label'));
        var ol = document.createElement('ol');
        ol.id = element.id;
        ol.className = element.className;
        ol.innerHTML = element.innerHTML;
        li.appendChild(ol);
        element.parentNode.replaceChild(li, element);
    });

    var subs = Jax.select('nav#menu > li.menu-toggle > div');
    subs.forEach(function(element){
        element.onclick = function(){
            var par = this.parentNode;
            var toggle = Jax.cls.has(par, 'shift');
            Jax.select('nav#menu > li.menu-toggle.shift').removeClass('shift');
            if(!toggle){
                Jax.select(par).addClass('shift');
            }
        };

        Jax.select(element.parentNode.getElementsByTagName('ol')[0].children).click(function(){
            Jax.page.load(this.getAttribute('page'));
            Jax.select(element.parentNode).removeClass('shift');
        });

    });

</script>